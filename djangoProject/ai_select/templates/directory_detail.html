<!DOCTYPE html>
<html>
<head>
    {% load static %}
    <title>Directory Detail</title>
    <link rel="stylesheet" type="text/css" href="{% static 'admin/css/base.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'admin/css/widgets.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'admin/css/forms.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'admin/css/responsive.css' %}">
    <script src="{% static 'admin/js/jquery.min.js' %}"></script>
    <script src="{% static 'admin/js/core.js' %}"></script>
    <script src="{% static 'admin/js/admin/RelatedObjectLookup.js' %}"></script>
    <script src="{% static 'admin/js/actions.js' %}"></script>
    <script src="{% static 'admin/js/urlify.js' %}"></script>
    <script src="{% static 'admin/js/prepopulate.js' %}"></script>
    <script src="{% static 'admin/js/vendor/xregexp/xregexp.min.js' %}"></script>
    <script src="{% static 'admin/js/vendor/xregexp/xregexp.install.js' %}"></script>
    <script>
        function showColumn(columnValue) {
            var columnContent = document.getElementById('column-content');
            columnContent.innerHTML = ''; // 清空现有内容

            // 获取所有Excel数据行
            var rows = document.querySelectorAll('.excel-data-container tbody tr');

            // 遍历所有行，根据columnValue进行过滤
            rows.forEach(function(row) {
                var cells = row.querySelectorAll('td');
                var shouldShow = false;
                cells.forEach(function(cell) {
                    if (cell.textContent === columnValue) {
                        shouldShow = true;
                    }
                });

                // 根据过滤结果显示或隐藏行
                row.style.display = shouldShow ? '' : 'none';
            });

            // 显示过滤后的内容
            columnContent.style.display = 'block';
        }
    </script>
</head>
<body>
    <div id="container">
        <div id="header">
            <div id="branding">
                <h1 id="site-name"><a href="{% url 'index' %}">HMT AI select</a></h1>
            </div>
            <div id="user-tools">
                {% if user.is_authenticated %}
                    Welcome, <strong>{{ user.username }}</strong>. <a href="{% url 'admin:logout' %}">Log out</a>
                {% else %}
                    <a href="{% url 'admin:login' %}">Log in</a>
                {% endif %}
            </div>
        </div>
        <div id="content" class="flex">
            <form>
                {% for item, count in third_column.items %}
                    <input type="radio" id="{{ item }}" name="third_column" value="{{ item }}" onclick="showColumn(this.value)">
                    <label for="{{ item }}">{{ item }} [{{ count }}]</label><br>
                {% endfor %}
            </form>

            <div id="content-main">
                <h2>Directory: {{ directory_name }}</h2>
                <p><a href="{% url 'index' %}">Back to Index</a></p>
                <h3>Contents:</h3>
                <ul id="column-content" style="display: none;">
                    <!-- 动态内容将显示在这里 -->
                </ul>

                <!-- 新增的Excel数据内容 -->
                <div class="excel-data-container">
                    <h3>Excel Data:</h3>
                    <table border="1">
                        <thead>
                            <tr>
                                {% for column in excel_data.0.keys %}
                                    <th>{{ column }}</th>
                                {% endfor %}
                            </tr>
                        </thead>
                        <tbody>
                            {% for row in excel_data %}
                                <tr>
                                    {% for value in row.values %}
                                        <td>{{ value }}</td>
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

                <!-- 新增的图片设计内容 -->
                <div class="image-container">
                    <div style="display: inline-block; margin-right: 20px;">
                        <h3>静态图</h3>
                        <img src="https://placehold.co/300x200" alt="Static Image">
                        <p>调用路径见Excel文件A_Image_Path列，把X:\改成E:\HMT-backend就行了</p>
                    </div>
                    <div style="display: inline-block;">
                        <h3>新图、历史图（与psp网页类似,鼠标点击切换）</h3>
                        <img src="https://placehold.co/300x200" alt="New Image">
                        <p>调用路径分别是excel文件的B_Image_Path和C_Image_Path</p>
                    </div>
                </div>

                <div class="image-container">
                    <h3>各概率值，四个值</h3>
                    <p>直接调用excel文件的Probabilities值</p>
                </div>

                <div class="image-container">
                    <h3>下载原图（链接）</h3>
{#                    <a href="{% url 'download_image' %}" download>Download Original Image</a>#}
                </div>

                <div class="image-container">
                    <h3>分类判断是否正确按钮</h3>
                    <button onclick="alert('Correct')">正确</button>
                    <button onclick="alert('Incorrect')">错误</button>
                </div>

                <div class="image-container">
                    <h3>备注：</h3>
                    <p>应该是用户判断的备注，比如确认这个是某个小行星或者某个变星编号，用户可写可不写</p>
                </div>

                <div class="image-container">
                    <h3>前往已判页面的链接</h3>
{#                    <a href="{% url 'judged_pages' %}">前往已判页面</a>#}
                </div>
            </div>
        </div>
    </div>
</body>
</html>
